import{_ as ue}from"../chunks/preload-helper.41c905a7.js";import{S as Pe,i as Te,s as De,k as O,q as x,a as J,l as z,m as q,r as ee,h,c as Y,n as m,b as P,G as V,u as ve,H as j,I as ie,o as je,R as se,L as Ge,M as K,T as Qe,N as Oe,j as Ot,U as zt,e as W,J as ze,V as Re,W as Be,w as we,K as Xe,g as M,v as fe,d as U,f as ce,y as he,z as pe,A as ge,B as be,X as Ie,Y as Ee,Z as He,_ as Ft,O as Bt,p as $e}from"../chunks/index.7c5e5199.js";import{b as _e,m as Ut,e as Wt,t as Le,a as Ae,i as Fe,c as Rt}from"../chunks/setup.57078eda.js";import{w as ke}from"../chunks/singletons.3ce2d536.js";import{p as Xt}from"../chunks/stores.09175d14.js";const Ht=async()=>{const e=Object.entries(Object.assign({"/src/routes/texts/01_Lipp_cultural_collection_on_fashion_en.md":()=>ue(()=>import("../chunks/01_Lipp_cultural_collection_on_fashion_en.26e1ba11.js"),["../chunks/01_Lipp_cultural_collection_on_fashion_en.26e1ba11.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/01_Lipp_cultural_collections_on_fashion_de.md":()=>ue(()=>import("../chunks/01_Lipp_cultural_collections_on_fashion_de.5a50583d.js"),["../chunks/01_Lipp_cultural_collections_on_fashion_de.5a50583d.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/02_GNM_cultural_collection_on_fashion_de.md":()=>ue(()=>import("../chunks/02_GNM_cultural_collection_on_fashion_de.76677eff.js"),["../chunks/02_GNM_cultural_collection_on_fashion_de.76677eff.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/02_GNM_cultural_collection_on_fashion_en.md":()=>ue(()=>import("../chunks/02_GNM_cultural_collection_on_fashion_en.3f324f8a.js"),["../chunks/02_GNM_cultural_collection_on_fashion_en.3f324f8a.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/03_Fashion_costume_terminology_de.md":()=>ue(()=>import("../chunks/03_Fashion_costume_terminology_de.fbf24a9c.js"),["../chunks/03_Fashion_costume_terminology_de.fbf24a9c.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/03_Fashion_costume_terminology_en.md":()=>ue(()=>import("../chunks/03_Fashion_costume_terminology_en.0ecf3eff.js"),["../chunks/03_Fashion_costume_terminology_en.0ecf3eff.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/04_Lipp-GNM_Werkgruppen_de.md":()=>ue(()=>import("../chunks/04_Lipp-GNM_Werkgruppen_de.65cba8e1.js"),["../chunks/04_Lipp-GNM_Werkgruppen_de.65cba8e1.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/04_Lipp_GNM_Werkgruppen_en.md":()=>ue(()=>import("../chunks/04_Lipp_GNM_Werkgruppen_en.a818192d.js"),["../chunks/04_Lipp_GNM_Werkgruppen_en.a818192d.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/05_family_portrait_de.md":()=>ue(()=>import("../chunks/05_family_portrait_de.ae48768c.js"),["../chunks/05_family_portrait_de.ae48768c.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/05_family_portrait_en.md":()=>ue(()=>import("../chunks/05_family_portrait_en.9480c190.js"),["../chunks/05_family_portrait_en.9480c190.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/06_earlymodern_images_de.md":()=>ue(()=>import("../chunks/06_earlymodern_images_de.3b541675.js"),["../chunks/06_earlymodern_images_de.3b541675.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/06_earlymodern_images_en.md":()=>ue(()=>import("../chunks/06_earlymodern_images_en.6c6eb206.js"),["../chunks/06_earlymodern_images_en.6c6eb206.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/99_Chronology_of_LipperheideCostumeLibrary_de.md":()=>ue(()=>import("../chunks/99_Chronology_of_LipperheideCostumeLibrary_de.20b3db01.js"),["../chunks/99_Chronology_of_LipperheideCostumeLibrary_de.20b3db01.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/template.md":()=>ue(()=>import("../chunks/template.5d8b86f5.js"),["../chunks/template.5d8b86f5.js","../chunks/index.7c5e5199.js"],import.meta.url)}));return await Promise.all(e.map(async([t,s])=>{const n=await s(),{html:r}=n.default.render(),o=t.slice(17,-3),f=/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1/g,c=[...r.matchAll(f)].map(a=>a[2]).filter(a=>!a.startsWith("http")).map(a=>{const u=a.lastIndexOf("/");return u!==-1?a.substring(u+1):a});return{meta:n.metadata,path:o,text:r,links:c}}))},Jt=async({fetch:i})=>({posts:await(await i("/api/posts")).json()}),Yt=!0,Qt=async()=>(await Ht()).sort().map(l=>({slug:l.path.replaceAll("/","")})),Yl=Object.freeze(Object.defineProperty({__proto__:null,entries:Qt,load:Jt,prerender:Yt},Symbol.toStringTag,{value:"Module"})),Ze=ke(""),Je=ke(""),Ne=ke(!1),xe=ke([]),de=ke([]),Ue=ke([]),We=ke(0);function et(i){let e,l=i[0].meta.author+"",t;return{c(){e=O("div"),t=x(l),this.h()},l(s){e=z(s,"DIV",{class:!0});var n=q(e);t=ee(n,l),n.forEach(h),this.h()},h(){m(e,"class","author svelte-tmt4fa")},m(s,n){P(s,e,n),V(e,t)},p(s,n){n&1&&l!==(l=s[0].meta.author+"")&&ve(t,l)},d(s){s&&h(e)}}}function tt(i){var s;let e,l=((s=new Date(i[0].meta.date))==null?void 0:s.toLocaleDateString(i[0].meta.lang))+"",t;return{c(){e=O("div"),t=x(l),this.h()},l(n){e=z(n,"DIV",{class:!0});var r=q(e);t=ee(r,l),r.forEach(h),this.h()},h(){m(e,"class","date svelte-tmt4fa")},m(n,r){P(n,e,r),V(e,t)},p(n,r){var o;r&1&&l!==(l=((o=new Date(n[0].meta.date))==null?void 0:o.toLocaleDateString(n[0].meta.lang))+"")&&ve(t,l)},d(n){n&&h(e)}}}function Zt(i){var u,d;let e,l=i[0].meta.title+"",t,s,n,r,o,f,c=((u=i[0].meta)==null?void 0:u.author)&&et(i),a=((d=i[0].meta)==null?void 0:d.date)&&tt(i);return{c(){e=O("h1"),t=x(l),s=J(),n=O("div"),c&&c.c(),r=J(),a&&a.c(),o=J(),f=O("div"),this.h()},l(_){e=z(_,"H1",{class:!0});var I=q(e);t=ee(I,l),I.forEach(h),s=Y(_),n=z(_,"DIV",{class:!0});var D=q(n);c&&c.l(D),r=Y(D),a&&a.l(D),D.forEach(h),o=Y(_),f=z(_,"DIV",{class:!0});var A=q(f);A.forEach(h),this.h()},h(){m(e,"class","svelte-tmt4fa"),m(n,"class","metadata svelte-tmt4fa"),m(f,"class","markdown svelte-tmt4fa")},m(_,I){P(_,e,I),V(e,t),P(_,s,I),P(_,n,I),c&&c.m(n,null),V(n,r),a&&a.m(n,null),P(_,o,I),P(_,f,I),f.innerHTML=i[1]},p(_,[I]){var D,A;I&1&&l!==(l=_[0].meta.title+"")&&ve(t,l),(D=_[0].meta)!=null&&D.author?c?c.p(_,I):(c=et(_),c.c(),c.m(n,r)):c&&(c.d(1),c=null),(A=_[0].meta)!=null&&A.date?a?a.p(_,I):(a=tt(_),a.c(),a.m(n,null)):a&&(a.d(1),a=null)},i:j,o:j,d(_){_&&h(e),_&&h(s),_&&h(n),c&&c.d(),a&&a.d(),_&&h(o),_&&h(f)}}}const Kt=/\[\^([^\]]+)\]/g;let jt=100;function $t(i){const e=i.currentTarget.getAttribute("data-id"),l=document.querySelector(`.node[data-id="${e}"]`);l&&l.classList.add("hover"),i.currentTarget.classList.add("hover")}function xt(i){const e=i.currentTarget.getAttribute("data-id"),l=document.querySelector(`.node[data-id="${e}"]`);l&&l.classList.remove("hover"),i.currentTarget.classList.remove("hover")}function el(i,e,l){const t=l-e;return(i-e)/t*100}function tl(i,e,l){const t=l-e;return e+t*i/100}function ll(i,e,l){let t,s;ie(i,Ne,p=>l(8,t=p)),ie(i,Ze,p=>l(9,s=p));let{data:n}=e,{items:r}=e,{scrollTopVal:o}=e,f=n.text,c=1;const u=f.replace(/<a\s+href="([^"]+)"\s*>([^<]+)<\/a>/g,(p,b,y)=>{if(b.startsWith("http"))return`<a class="external" target="_blank" href="${b}" title="${y}">${y}</a>`;{let E=b.split("/")[1];return`<a class="node-highlite" unique-id="${E}" id="${b.split("/")[1]}"
				data-id="${b.split("/")[1]}" title="${y}">${y}
				<span class="symbol node" unique-id="${E}" data-id="item_${b.split("/")[1]}"
				data-class="${r.filter(w=>w.label==y).map(w=>{var S,B;return(B=(S=w.data)==null?void 0:S["@type"])==null?void 0:B[1]})}">
					●
					</span></a>`}}).replace(Kt,(p,b)=>{const y=c++;return`<sup id="fn-${y}"><a href="#fnref-${y}">${y}</a></sup><span id="fn-${y}-content">${b}</span>`}),d=Array.from({length:c-1},(p,b)=>{var w;const y=b+1,E=(w=u.match(new RegExp(`<span id="fn-${y}-content">([^<]+)</span>`)))==null?void 0:w[1];return`<li id="fnref-${y}"> ${E}</li>`}).join(""),_=`${u}
	<ol class="biblio">${d}</ol>`;let I;je(async()=>{l(4,I=document==null?void 0:document.querySelectorAll(".markdown a[data-id]")),A(I),I.forEach(p=>{p.addEventListener("mouseenter",$t),p.addEventListener("mouseleave",xt),p.addEventListener("click",D)})});function D(p){I.forEach(E=>{const w=E.getAttribute("data-id"),S=document.querySelector(`.node[data-id="${w}"]`);S&&S.classList.remove("clicked"),E.classList.remove("clicked")});const b=p.currentTarget.getAttribute("data-id"),y=document.querySelector(`.node[data-id="${b}"]`);y&&y.classList.toggle("clicked"),p.currentTarget.classList.toggle("clicked"),se(Ze,s=b,s)}function A(p){let b=null;l(4,I=Array.from(p).map(y=>{let E=y.offsetTop;return b!==null&&E<=b?y.adjustedOffsetTop=b+jt:y.adjustedOffsetTop=E,b=y.adjustedOffsetTop,y}))}let L=0;function C(p,b){var y,E,w,S,B,F;if(!t){let T=(y=p==null?void 0:p[L])==null?void 0:y.adjustedOffsetTop,R=(E=p==null?void 0:p[L+1])==null?void 0:E.adjustedOffsetTop,Q=(w=p==null?void 0:p[L])==null?void 0:w.getAttribute("data-id"),le=(S=p==null?void 0:p[L+1])==null?void 0:S.getAttribute("data-id"),G=(B=document.querySelector(`.node[data-id="${Q}"]`))==null?void 0:B.offsetTop,$=(F=document.querySelector(`.node[data-id="${le}"]`))==null?void 0:F.offsetTop,g=el(b,T,R),v=tl(g,G,$);b>R&&L++,b<T&&L!=0&&L--;const k=document.querySelector(".links:first-of-type");T&&R&&k&&g&&v&&(k==null||k.scrollTo({top:v}))}}return i.$$set=p=>{"data"in p&&l(0,n=p.data),"items"in p&&l(2,r=p.items),"scrollTopVal"in p&&l(3,o=p.scrollTopVal)},i.$$.update=()=>{i.$$.dirty&24&&C(I,o)},[n,_,r,o,I]}class sl extends Pe{constructor(e){super(),Te(this,e,ll,Zt,De,{data:0,items:2,scrollTopVal:3})}}function lt(i,e,l){const t=i.slice();return t[27]=e[l],t}function il(i){let e,l=(i[0].title||"")+"",t;return{c(){e=O("div"),t=x(l),this.h()},l(s){e=z(s,"DIV",{class:!0});var n=q(e);t=ee(n,l),n.forEach(h),this.h()},h(){m(e,"class","title svelte-x5b8hf")},m(s,n){P(s,e,n),V(e,t)},p(s,n){n&1&&l!==(l=(s[0].title||"")+"")&&ve(t,l)},d(s){s&&h(e)}}}function nl(i){let e,l,t,s,n,r=(i[0].title||"")+"",o,f,c;return{c(){e=O("img"),s=J(),n=O("div"),o=x(r),this.h()},l(a){e=z(a,"IMG",{src:!0,alt:!0,class:!0}),s=Y(a),n=z(a,"DIV",{class:!0});var u=q(n);o=ee(u,r),u.forEach(h),this.h()},h(){Xe(e.src,l=i[5])||m(e,"src",l),m(e,"alt",t=i[0].title),m(e,"class","svelte-x5b8hf"),m(n,"class","title svelte-x5b8hf")},m(a,u){P(a,e,u),P(a,s,u),P(a,n,u),V(n,o),f||(c=K(e,"load",i[11]),f=!0)},p(a,u){u&32&&!Xe(e.src,l=a[5])&&m(e,"src",l),u&1&&t!==(t=a[0].title)&&m(e,"alt",t),u&1&&r!==(r=(a[0].title||"")+"")&&ve(o,r)},d(a){a&&h(e),a&&h(s),a&&h(n),f=!1,c()}}}function rl(i){let e,l,t,s,n,r=i[0].title+"",o,f,c;return{c(){e=O("img"),s=J(),n=O("div"),o=x(r),this.h()},l(a){e=z(a,"IMG",{src:!0,alt:!0,class:!0}),s=Y(a),n=z(a,"DIV",{class:!0});var u=q(n);o=ee(u,r),u.forEach(h),this.h()},h(){Xe(e.src,l=i[0].img.replace("square","large"))||m(e,"src",l),m(e,"alt",t=i[0].title),m(e,"class","svelte-x5b8hf"),m(n,"class","title svelte-x5b8hf")},m(a,u){P(a,e,u),P(a,s,u),P(a,n,u),V(n,o),f||(c=K(e,"load",i[11]),f=!0)},p(a,u){u&1&&!Xe(e.src,l=a[0].img.replace("square","large"))&&m(e,"src",l),u&1&&t!==(t=a[0].title)&&m(e,"alt",t),u&1&&r!==(r=a[0].title+"")&&ve(o,r)},d(a){a&&h(e),a&&h(s),a&&h(n),f=!1,c()}}}function st(i){let e,l=i[8].essays,t=[];for(let s=0;s<l.length;s+=1)t[s]=it(lt(i,l,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=W()},l(s){for(let n=0;n<t.length;n+=1)t[n].l(s);e=W()},m(s,n){for(let r=0;r<t.length;r+=1)t[r].m(s,n);P(s,e,n)},p(s,n){if(n&256){l=s[8].essays;let r;for(r=0;r<l.length;r+=1){const o=lt(s,l,r);t[r]?t[r].p(o,n):(t[r]=it(o),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(s){ze(t,s),s&&h(e)}}}function it(i){let e,l,t,s=i[27].title+"",n,r;return{c(){e=O("a"),l=x("→"),t=O("em"),n=x(s),this.h()},l(o){e=z(o,"A",{class:!0,href:!0,target:!0,rel:!0});var f=q(e);l=ee(f,"→"),t=z(f,"EM",{});var c=q(t);n=ee(c,s),c.forEach(h),f.forEach(h),this.h()},h(){m(e,"class","link svelte-x5b8hf"),m(e,"href",r=i[27].url),m(e,"target","_blank"),m(e,"rel","noopener noreferrer")},m(o,f){P(o,e,f),V(e,l),V(e,t),V(t,n)},p(o,f){f&256&&s!==(s=o[27].title+"")&&ve(n,s),f&256&&r!==(r=o[27].url)&&m(e,"href",r)},d(o){o&&h(e)}}}function nt(i){let e;function l(n,r){return n[0].title==null||n[0].title.length==1?al:ol}let t=l(i),s=t(i);return{c(){s.c(),e=W()},l(n){s.l(n),e=W()},m(n,r){s.m(n,r),P(n,e,r)},p(n,r){t===(t=l(n))&&s?s.p(n,r):(s.d(1),s=t(n),s&&(s.c(),s.m(e.parentNode,e)))},d(n){s.d(n),n&&h(e)}}}function ol(i){let e,l,t;return{c(){e=O("a"),l=x("→ Metadata"),this.h()},l(s){e=z(s,"A",{class:!0,href:!0,target:!0,rel:!0});var n=q(e);l=ee(n,"→ Metadata"),n.forEach(h),this.h()},h(){m(e,"class","link svelte-x5b8hf"),m(e,"href",t=`${i[3]}/item/${i[4]}`),m(e,"target","_blank"),m(e,"rel","noopener noreferrer")},m(s,n){P(s,e,n),V(e,l)},p(s,n){n&24&&t!==(t=`${s[3]}/item/${s[4]}`)&&m(e,"href",t)},d(s){s&&h(e)}}}function al(i){let e,l,t;return{c(){e=O("a"),l=x("→ Metadata"),this.h()},l(s){e=z(s,"A",{class:!0,href:!0,target:!0,rel:!0});var n=q(e);l=ee(n,"→ Metadata"),n.forEach(h),this.h()},h(){m(e,"class","link svelte-x5b8hf"),m(e,"href",t=`${i[3]}/media/${i[4]}`),m(e,"target","_blank"),m(e,"rel","noopener noreferrer")},m(s,n){P(s,e,n),V(e,l)},p(s,n){n&24&&t!==(t=`${s[3]}/media/${s[4]}`)&&m(e,"href",t)},d(s){s&&h(e)}}}function ul(i){let e,l,t,s,n,r;function o(d,_){return d[0].img?rl:d[5]?nl:il}let f=o(i),c=f(i),a=i[8]!=null&&st(i),u=i[3]&&nt(i);return{c(){e=O("div"),c.c(),l=J(),a&&a.c(),t=J(),u&&u.c(),this.h()},l(d){e=z(d,"DIV",{class:!0,title:!0,source:!0,target:!0,"data-id":!0});var _=q(e);c.l(_),l=Y(_),a&&a.l(_),t=Y(_),u&&u.l(_),_.forEach(h),this.h()},h(){m(e,"class","node svelte-x5b8hf"),m(e,"title",s=i[0].title),m(e,"source",i[9]),m(e,"target",i[4]),m(e,"data-id",i[4]),Ge(e,"selected",i[7]),Ge(e,"linkToEssay",i[8]!=null)},m(d,_){P(d,e,_),c.m(e,null),V(e,l),a&&a.m(e,null),V(e,t),u&&u.m(e,null),i[21](e),n||(r=[K(e,"mouseover",i[22]),K(e,"mouseleave",function(){Qe(i[13](i[4]))&&i[13](i[4]).apply(this,arguments)}),K(e,"click",i[18]),K(e,"keydown",i[19]),K(e,"focus",i[20])],n=!0)},p(d,[_]){i=d,f===(f=o(i))&&c?c.p(i,_):(c.d(1),c=f(i),c&&(c.c(),c.m(e,l))),i[8]!=null?a?a.p(i,_):(a=st(i),a.c(),a.m(e,t)):a&&(a.d(1),a=null),i[3]?u?u.p(i,_):(u=nt(i),u.c(),u.m(e,null)):u&&(u.d(1),u=null),_&1&&s!==(s=i[0].title)&&m(e,"title",s),_&512&&m(e,"source",i[9]),_&16&&m(e,"target",i[4]),_&16&&m(e,"data-id",i[4]),_&128&&Ge(e,"selected",i[7]),_&256&&Ge(e,"linkToEssay",i[8]!=null)},i:j,o:j,d(d){d&&h(e),c.d(),a&&a.d(),u&&u.d(),i[21](null),n=!1,Oe(r)}}}function fl(i,e,l){let t,s,n,r,o,f,c=j,a=()=>(c(),c=Re(L,v=>l(17,f=v)),L),u,d=j,_=()=>(d(),d=Re(C,v=>l(24,u=v)),C),I,D;ie(i,de,v=>l(16,o=v)),ie(i,Ze,v=>l(25,I=v)),ie(i,Je,v=>l(10,D=v)),i.$$.on_destroy.push(()=>c()),i.$$.on_destroy.push(()=>d());let{datum:A}=e,{entities:L}=e;a();let{updatePosition:C}=e;_();let{essaysItems:p}=e,{site:b}=e,{openNode:y}=e,E,w=null;Ot(()=>{const v=A.source;v==`item_${I}`&&v!=w&&y(A,1),w=`item_${I}`}),zt(()=>{se(C,u=!0,u)});function S(){se(C,u=!0,u)}function B(v){var H;const k=v.split("/"),N=f.find(ne=>ne["o:id"]==k.slice(-1)[0]);return(H=N==null?void 0:N.thumbnail_display_urls)==null?void 0:H.large}let F;function T(v){const k=v,N=document.querySelector(`.node-highlite[data-id="${k}"]`);N&&N.classList.add("hover"),F.classList.add("hover")}function R(v){const k=v,N=document.querySelector(`.node-highlite[data-id="${k}"]`);N&&N.classList.remove("hover"),F.classList.remove("hover")}function Q(v){Be.call(this,i,v)}function le(v){Be.call(this,i,v)}function G(v){Be.call(this,i,v)}function $(v){we[v?"unshift":"push"](()=>{F=v,l(6,F)})}const g=()=>{se(Je,D=s,D),T(s)};return i.$$set=v=>{"datum"in v&&l(0,A=v.datum),"entities"in v&&a(l(1,L=v.entities)),"updatePosition"in v&&_(l(2,C=v.updatePosition)),"essaysItems"in v&&l(14,p=v.essaysItems),"site"in v&&l(3,b=v.site),"openNode"in v&&l(15,y=v.openNode)},i.$$.update=()=>{i.$$.dirty&131073&&f&&l(5,E=B(A.target)),i.$$.dirty&1&&l(9,t=A.source.split("/").slice(-1)[0]),i.$$.dirty&1&&l(4,s=A.target.split("/").slice(-1)[0]),i.$$.dirty&16400&&l(8,n=p.find(v=>v.id==s)),i.$$.dirty&65537&&l(7,r=o.some(v=>(v==null?void 0:v.id)==A.target))},[A,L,C,b,s,E,F,r,n,t,D,S,T,R,p,y,o,f,Q,le,G,$,g]}class Vt extends Pe{constructor(e){super(),Te(this,e,fl,ul,De,{datum:0,entities:1,updatePosition:2,essaysItems:14,site:3,openNode:15})}}var cl=0;function _l(){return++cl}var Ke=Function("return this")();typeof Ke.__nextId!="function"&&(Ke.__nextId=_l);function Mt(){return"uid-"+Ke.__nextId()}function dl(i){let e,l,t;return{c(){e=O("div"),this.h()},l(s){e=z(s,"DIV",{source:!0,target:!0}),q(e).forEach(h),this.h()},h(){m(e,"source",l=i[0].source.split("/").slice(-1)[0]),m(e,"target",t=i[0].target.split("/").slice(-1)[0])},m(s,n){P(s,e,n),i[8](e)},p(s,[n]){n&1&&l!==(l=s[0].source.split("/").slice(-1)[0])&&m(e,"source",l),n&1&&t!==(t=s[0].target.split("/").slice(-1)[0])&&m(e,"target",t)},i:j,o:j,d(s){s&&h(e),i[8](null)}}}let rt=0;function ml(i,e,l){let t,s,n,r,o=j,f=()=>(o(),o=Re(_,p=>l(5,r=p)),_),c,a;ie(i,Ue,p=>l(12,n=p)),ie(i,We,p=>l(6,c=p)),ie(i,de,p=>l(7,a=p)),i.$$.on_destroy.push(()=>o());let{datum:u}=e,{label:d}=e,{updatePosition:_}=e;f();let I,D=Mt();function A(p,b=0,y){const E=p.split("/").slice(-1)[0],w=[...document.querySelectorAll(`.node[data-id="${E}"]`)],S=[];return w.forEach(B=>{const F=B.getBoundingClientRect(),T={x:F.x+c,y:F.y+b,width:F.width-b/2,height:F.height,selected:"selected"};S.push(T)}),S}function L(){delete n[D],se(_,r=!1,r);const p=A(u.source,rt),b=A(u.target,rt);I&&(I.getBoundingClientRect().x,I.getBoundingClientRect().y),p.forEach(y=>{b.forEach(E=>{let w=100;const S=y==null?void 0:y.selected;let B,F,T,R,Q;B=y.x+y.width,F=y.y,T=E.x,R=E.y,E.x<y.x||E.x==y.x?Q=E.x-w*5:E.x==y.x?Q=E.x-w*3:Q=E.x-w,u.source.includes("item_")&&(Q=E.x-w);const le=B+w,G=F,$=E.y,g=`M${B},${F}C${le},${G} ${Q},${$} ${T},${R}`;se(Ue,n[D]=n[D]||[],n),n[D].push({class:s,d:g,label:d,selected:S,datum:{source:u.source.split("/").at(-1),target:u.target.split("/").at(-1)},reverse:u==null?void 0:u.reverse})})})}zt(()=>{delete n[D],se(Ue,n=[],n)});function C(p){we[p?"unshift":"push"](()=>{I=p,l(2,I)})}return i.$$set=p=>{"datum"in p&&l(0,u=p.datum),"label"in p&&l(3,d=p.label),"updatePosition"in p&&f(l(1,_=p.updatePosition))},i.$$.update=()=>{i.$$.dirty&96&&L(),i.$$.dirty&128&&l(4,t=a.slice(-1)[0].id),i.$$.dirty&17&&(s=u.target==t||u.source==t?"highlite":"")},[u,_,I,d,t,r,c,a,C]}class qt extends Pe{constructor(e){super(),Te(this,e,ml,dl,De,{datum:0,label:3,updatePosition:1})}}new TextEncoder;async function hl(i){const e=/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1[^>]*?>(.*?)<\/a>/g,l=[],t=[],s=[],n=[];let r;for(;r=e.exec(i);)if(!r[2].includes("http")){const p=r[3],b=r[2];b.includes("item/")&&l.push(b.split("/")[1]),b.includes("set/")&&s.push(b.split("/")[1]),b.includes("media/")&&t.push(b.split("/")[1]),n.push({label:p,id:b.split("/")[1]})}const o=Wt,c=C(l,o).map(p=>{const b=`${_e}/items?${p.map(y=>`id[]=${y}`).join("&")}`;return fetch(b).then(y=>y.json())}),u=C(s,o).map(p=>{const b=`${_e}/item_sets?${p.map(y=>`id[]=${y}`).join("&")}`;return fetch(b).then(y=>y.json())}),_=C(t,o).map(p=>{const b=`${_e}/media?${p.map(y=>`id[]=${y}`).join("&")}`;return fetch(b).then(y=>y.json())}),I=await Promise.all(c),D=await Promise.all(u),A=await Promise.all(_),L=[...I.flat(),...A.flat(),...D.flat()];for(let p=0;p<L.length;p++){const b=n.find(E=>L[p]["o:id"]==E.id),y=L[p];b.uniqueId=Mt(),b.data=y}return n;function C(p,b){const y=[];for(let E=0;E<p.length;E+=b)y.push(p.slice(E,E+b));return y}}async function Ct(i){let e=[];for(let t=0;t<i.length;t++)if(i[t].data){let s=i[t].data,n=i[t].set||null,r=pl(s,n);e=[...e,...r]}return{...{nodes:e.reduce((t,s)=>(t.find(n=>n.id===s.source)||t.push({id:s.source,title:s.title}),t.find(n=>n.id===s.target)||t.push({id:s.target,title:s.title}),t),[]),links:e}}}function pl(i,e){var f;let l=[],t=`${_e}/resources/${i["o:id"]}`;e&&l.push({source:`${_e}/resources/${e.id}`,target:t,img:(f=i==null?void 0:i.thumbnail_display_urls)==null?void 0:f.large,title:i["o:title"]});let s,n=!1;const r=/\b[a-zA-Z]+\d+[a-zA-Z]*\s/;let o=async function(c){var a,u,d,_,I,D,A,L,C,p,b,y;for(let E in c)if(E==="@id"&&c[E].startsWith(_e)&&(c["o:title"]||c.display_title||n==!0)){let w=c[E].split("/").pop(),S=`${_e}/resources/${w}`;const B=c["o:title"]||c.display_title,F=(c==null?void 0:c.thumbnail_url)||((a=c==null?void 0:c.thumbnail_display_urls)==null?void 0:a.large),T=l.some(le=>le.source===t&&le.target===S);let R=((d=(u=c.property_label)==null?void 0:u.replace("_"," "))==null?void 0:d.replace(r,""))||(s==null?void 0:s.replace(r,""));const Q=Ut.map(le=>le.props.includes(R)?le.key:"").find(Boolean);T||l.push({source:t,target:S,title:B,img:F,property:R,category:Q,reverse:n})}else if(E==="@id"&&!c[E].startsWith(_e)&&c["o:label"]){let w=((I=(_=c.property_label)==null?void 0:_.replace("_"," "))==null?void 0:I.replace(r,""))||(s==null?void 0:s.replace(r,""));l.push({source:t,target:c[E],title:c["o:label"],property:w,category:"",external:!0,reverse:n})}else if(E==="@id"&&s=="media"&&t.split("/").pop()!=((D=c==null?void 0:c["o:primary_media"])==null?void 0:D["@id"].split("/").pop())){let w=((L=(A=c.property_label)==null?void 0:A.replace("_"," "))==null?void 0:L.replace(r,""))||(s==null?void 0:s.replace(r,"")),S=c[E].split("/").pop(),B=`${_e}/resources/${S}`;l.push({source:t,target:B,title:(c==null?void 0:c["o:label"])||" ",property:w,category:"",reverse:n})}else if(E==="@id"&&s=="item"){let w=((p=(C=c.property_label)==null?void 0:C.replace("_"," "))==null?void 0:p.replace(r,""))||(s==null?void 0:s.replace(r,"")),S=c[E].split("/").pop(),B=`${_e}/resources/${S}`;l.push({source:t,target:B,title:(c==null?void 0:c["o:label"])||" ",property:w,category:"",reverse:n})}else typeof c[E]=="object"&&(isNaN(E)&&(s=(y=(b=(E==null?void 0:E.split(":"))[1])==null?void 0:b.split("_"))==null?void 0:y.join(" "),E=="@reverse"&&(n=!0)),o(c[E]))};return o(i),l}function ot(i,e,l){const t=i.slice();return t[22]=e[l],t}function at(i){let e,l;return{c(){e=O("div"),l=x("Loading..."),this.h()},l(t){e=z(t,"DIV",{class:!0});var s=q(e);l=ee(s,"Loading..."),s.forEach(h),this.h()},h(){m(e,"class","loading svelte-1kyenid")},m(t,s){P(t,e,s),V(e,l)},d(t){t&&h(e)}}}function ut(i){let e,l,t=i[0],s=[];for(let r=0;r<t.length;r+=1)s[r]=ct(ot(i,t,r));const n=r=>U(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=W()},l(r){for(let o=0;o<s.length;o+=1)s[o].l(r);e=W()},m(r,o){for(let f=0;f<s.length;f+=1)s[f].m(r,o);P(r,e,o),l=!0},p(r,o){if(o&639){t=r[0];let f;for(f=0;f<t.length;f+=1){const c=ot(r,t,f);s[f]?(s[f].p(c,o),M(s[f],1)):(s[f]=ct(c),s[f].c(),M(s[f],1),s[f].m(e.parentNode,e))}for(fe(),f=t.length;f<s.length;f+=1)n(f);ce()}},i(r){if(!l){for(let o=0;o<t.length;o+=1)M(s[o]);l=!0}},o(r){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)U(s[o]);l=!1},d(r){ze(s,r),r&&h(e)}}}function gl(i){var t;let e,l;return e=new qt({props:{datum:i[22],updatePosition:i[3],label:((t=i[22])==null?void 0:t.property)||""}}),{c(){he(e.$$.fragment)},l(s){pe(e.$$.fragment,s)},m(s,n){ge(e,s,n),l=!0},p(s,n){var o;const r={};n&1&&(r.datum=s[22]),n&8&&(r.updatePosition=s[3]),n&1&&(r.label=((o=s[22])==null?void 0:o.property)||""),e.$set(r)},i(s){l||(M(e.$$.fragment,s),l=!0)},o(s){U(e.$$.fragment,s),l=!1},d(s){be(e,s)}}}function bl(i){let e,l,t=i[22].source!=i[22].target&&ft(i);return{c(){t&&t.c(),e=W()},l(s){t&&t.l(s),e=W()},m(s,n){t&&t.m(s,n),P(s,e,n),l=!0},p(s,n){s[22].source!=s[22].target?t?(t.p(s,n),n&1&&M(t,1)):(t=ft(s),t.c(),M(t,1),t.m(e.parentNode,e)):t&&(fe(),U(t,1,1,()=>{t=null}),ce())},i(s){l||(M(t),l=!0)},o(s){U(t),l=!1},d(s){t&&t.d(s),s&&h(e)}}}function ft(i){var c;let e,l,t,s,n;const r=[kl,vl],o=[];function f(a,u){var d;return(d=a[22])!=null&&d.external?1:0}return e=f(i),l=o[e]=r[e](i),s=new qt({props:{datum:i[22],updatePosition:i[3],label:((c=i[22])==null?void 0:c.property)||""}}),{c(){l.c(),t=J(),he(s.$$.fragment)},l(a){l.l(a),t=Y(a),pe(s.$$.fragment,a)},m(a,u){o[e].m(a,u),P(a,t,u),ge(s,a,u),n=!0},p(a,u){var I;let d=e;e=f(a),e===d?o[e].p(a,u):(fe(),U(o[d],1,1,()=>{o[d]=null}),ce(),l=o[e],l?l.p(a,u):(l=o[e]=r[e](a),l.c()),M(l,1),l.m(t.parentNode,t));const _={};u&1&&(_.datum=a[22]),u&8&&(_.updatePosition=a[3]),u&1&&(_.label=((I=a[22])==null?void 0:I.property)||""),s.$set(_)},i(a){n||(M(l),M(s.$$.fragment,a),n=!0)},o(a){U(l),U(s.$$.fragment,a),n=!1},d(a){o[e].d(a),a&&h(t),be(s,a)}}}function vl(i){let e,l,t,s;return l=new Vt({props:{site:i[6],entities:i[2],updatePosition:i[3],datum:i[22],essaysItems:i[5],openNode:i[9]}}),{c(){e=O("a"),he(l.$$.fragment),this.h()},l(n){e=z(n,"A",{href:!0,target:!0,rel:!0});var r=q(e);pe(l.$$.fragment,r),r.forEach(h),this.h()},h(){m(e,"href",t=i[22].target),m(e,"target","_blank"),m(e,"rel","noreferrer")},m(n,r){P(n,e,r),ge(l,e,null),s=!0},p(n,r){const o={};r&64&&(o.site=n[6]),r&4&&(o.entities=n[2]),r&8&&(o.updatePosition=n[3]),r&1&&(o.datum=n[22]),r&32&&(o.essaysItems=n[5]),l.$set(o),(!s||r&1&&t!==(t=n[22].target))&&m(e,"href",t)},i(n){s||(M(l.$$.fragment,n),s=!0)},o(n){U(l.$$.fragment,n),s=!1},d(n){n&&h(e),be(l)}}}function kl(i){let e,l;function t(){return i[16](i[22])}function s(){return i[17](i[22])}return e=new Vt({props:{site:i[6],entities:i[2],updatePosition:i[3],datum:i[22],essaysItems:i[5],openNode:i[9]}}),e.$on("click",t),e.$on("keydown",s),{c(){he(e.$$.fragment)},l(n){pe(e.$$.fragment,n)},m(n,r){ge(e,n,r),l=!0},p(n,r){i=n;const o={};r&64&&(o.site=i[6]),r&4&&(o.entities=i[2]),r&8&&(o.updatePosition=i[3]),r&1&&(o.datum=i[22]),r&32&&(o.essaysItems=i[5]),e.$set(o)},i(n){l||(M(e.$$.fragment,n),l=!0)},o(n){U(e.$$.fragment,n),l=!1},d(n){be(e,n)}}}function ct(i){let e,l,t,s,n;function r(...a){return i[15](i[22],...a)}const o=[bl,gl],f=[];function c(a,u){return u&3&&(e=null),e==null&&(e=!!a[1].some(r)),e?0:a[22].source&&a[22].target&&a[22].source!=a[22].target?1:-1}return~(l=c(i,-1))&&(t=f[l]=o[l](i)),{c(){t&&t.c(),s=W()},l(a){t&&t.l(a),s=W()},m(a,u){~l&&f[l].m(a,u),P(a,s,u),n=!0},p(a,u){i=a;let d=l;l=c(i,u),l===d?~l&&f[l].p(i,u):(t&&(fe(),U(f[d],1,1,()=>{f[d]=null}),ce()),~l?(t=f[l],t?t.p(i,u):(t=f[l]=o[l](i),t.c()),M(t,1),t.m(s.parentNode,s)):t=null)},i(a){n||(M(t),n=!0)},o(a){U(t),n=!1},d(a){~l&&f[l].d(a),a&&h(s)}}}function yl(i){let e,l,t,s=i[0]&&typeof i[0]=="object"&&Object.keys(i[0]).length>0,n,r=i[8]&&at(),o=s&&ut(i);return{c(){e=O("section"),r&&r.c(),l=J(),t=O("div"),o&&o.c()},l(f){e=z(f,"SECTION",{});var c=q(e);r&&r.l(c),l=Y(c),t=z(c,"DIV",{});var a=q(t);o&&o.l(a),a.forEach(h),c.forEach(h)},m(f,c){P(f,e,c),r&&r.m(e,null),V(e,l),V(e,t),o&&o.m(t,null),i[18](e),n=!0},p(f,[c]){f[8]?r||(r=at(),r.c(),r.m(e,l)):r&&(r.d(1),r=null),c&1&&(s=f[0]&&typeof f[0]=="object"&&Object.keys(f[0]).length>0),s?o?(o.p(f,c),c&1&&M(o,1)):(o=ut(f),o.c(),M(o,1),o.m(t,null)):o&&(fe(),U(o,1,1,()=>{o=null}),ce())},i(f){n||(M(o),n=!0)},o(f){U(o),n=!1},d(f){f&&h(e),r&&r.d(),o&&o.d(),i[18](null)}}}function Il(i){let e=document.querySelector(`#col_${i}`);e&&e.scrollTo({top:0,behavior:"smooth"})}function El(i,e){return e.filter(l=>!i.some(t=>t.target===l.target||t.id===l.target))}function wl(i,e,l){let t,s=j,n=()=>(s(),s=Re(d,T=>l(20,t=T)),d),r;ie(i,de,T=>l(21,r=T)),i.$$.on_destroy.push(()=>s());let{category:o}=e,{data:f}=e,{newData:c}=e,{dataLen:a}=e,{entities:u}=e,{updatePosition:d}=e;n();let{index:_}=e,{loadData:I}=e,{defaultNodes:D}=e,{batchSize:A}=e,{essaysItems:L}=e,{site:C}=e,p,b,y={nodes:[],links:[]};async function E(T,R){Il(R),l(8,b=!0),r.splice(R,r.length-R);let Q=r.map(k=>k.data).flat();const G=await(await fetch(T.target)).json();if(G!=null&&G["o:items"]&&r.length==1){let k=[];const N=G["o:items"]["@id"];(await(await fetch(N)).json()).forEach(te=>{k.push(te)});let Z=k.map(te=>({"o:title":te["o:title"],"@id":te["@id"],thumbnail_display_urls:te.thumbnail_display_urls}));G.related={...Z}}y=await Ct([{data:G}]);let $=y.links.filter(k=>k.source===T.target||k.target===T.target),g=El([...D,...Q],$),v=$.slice(0,A);se(de,r[R]={id:T.target,data:$.sort((k,N)=>{if(k.property)return k.property.localeCompare(N.property)}),page:0,new:g,paginate:v},r),l(8,b=!1),g.length>0&&I(v,A),se(d,t=!0,t)}const w=(T,R)=>(R==null?void 0:R.title)===T.title,S=T=>{E(T,_+1)},B=T=>{E(T,_+1)};function F(T){we[T?"unshift":"push"](()=>{p=T,l(7,p)})}return i.$$set=T=>{"category"in T&&l(10,o=T.category),"data"in T&&l(0,f=T.data),"newData"in T&&l(1,c=T.newData),"dataLen"in T&&l(11,a=T.dataLen),"entities"in T&&l(2,u=T.entities),"updatePosition"in T&&n(l(3,d=T.updatePosition)),"index"in T&&l(4,_=T.index),"loadData"in T&&l(12,I=T.loadData),"defaultNodes"in T&&l(13,D=T.defaultNodes),"batchSize"in T&&l(14,A=T.batchSize),"essaysItems"in T&&l(5,L=T.essaysItems),"site"in T&&l(6,C=T.site)},[f,c,u,d,_,L,C,p,b,E,o,a,I,D,A,w,S,B,F]}class Gt extends Pe{constructor(e){super(),Te(this,e,wl,yl,De,{category:10,data:0,newData:1,dataLen:11,entities:2,updatePosition:3,index:4,loadData:12,defaultNodes:13,batchSize:14,essaysItems:5,site:6})}}function _t(i,e,l){const t=i.slice();return t[32]=e[l],t[34]=l,t}function Ye(i){const e=i.slice(),l=e[32].paginate.filter(s=>!e[3].mainCategories.some(n=>n.props.includes(s.property)));e[35]=l;const t=e[32].data.filter(s=>!e[3].mainCategories.some(n=>n.props.includes(s.property))).length;return e[36]=t,e}function dt(i,e,l){const t=i.slice();t[37]=e[l];const s=t[32].paginate.filter(function(...o){return i[20](t[37],...o)});t[38]=s;const n=t[32].data.filter(function(...o){return i[21](t[37],...o)}).length;return t[36]=n,t}function Pl(i){let e,l,t=i[5],s=[];for(let r=0;r<t.length;r+=1)s[r]=vt(_t(i,t,r));const n=r=>U(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=W()},l(r){for(let o=0;o<s.length;o+=1)s[o].l(r);e=W()},m(r,o){for(let f=0;f<s.length;f+=1)s[f].m(r,o);P(r,e,o),l=!0},p(r,o){if(o[0]&16063){t=r[5];let f;for(f=0;f<t.length;f+=1){const c=_t(r,t,f);s[f]?(s[f].p(c,o),M(s[f],1)):(s[f]=vt(c),s[f].c(),M(s[f],1),s[f].m(e.parentNode,e))}for(fe(),f=t.length;f<s.length;f+=1)n(f);ce()}},i(r){if(!l){for(let o=0;o<t.length;o+=1)M(s[o]);l=!0}},o(r){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)U(s[o]);l=!1},d(r){ze(s,r),r&&h(e)}}}function Tl(i){let e,l,t;return{c(){e=O("div"),l=O("h4"),t=x("Loading Graph..."),this.h()},l(s){e=z(s,"DIV",{});var n=q(e);l=z(n,"H4",{class:!0});var r=q(l);t=ee(r,"Loading Graph..."),r.forEach(h),n.forEach(h),this.h()},h(){m(l,"class","loading svelte-d0zru6")},m(s,n){P(s,e,n),V(e,l),V(l,t)},p:j,i:j,o:j,d(s){s&&h(e)}}}function Dl(i){let e,l;return{c(){e=O("div"),l=x("There are no connections."),this.h()},l(t){e=z(t,"DIV",{class:!0});var s=q(e);l=ee(s,"There are no connections."),s.forEach(h),this.h()},h(){m(e,"class","no-items svelte-d0zru6")},m(t,s){P(t,e,s),V(e,l)},p:j,i:j,o:j,d(t){t&&h(e)}}}function Sl(i){let e,l,t=i[32].paginate.filter(i[19]).length>0,s,n,r=i[3].mainCategories,o=[];for(let u=0;u<r.length;u+=1)o[u]=ht(dt(i,r,u));const f=u=>U(o[u],1,1,()=>{o[u]=null});let c=t&&pt(Ye(i)),a=i[32].paginate.length<i[32].new.length&&bt(i);return{c(){e=O("div");for(let u=0;u<o.length;u+=1)o[u].c();l=J(),c&&c.c(),s=J(),a&&a.c()},l(u){e=z(u,"DIV",{});var d=q(e);for(let _=0;_<o.length;_+=1)o[_].l(d);l=Y(d),c&&c.l(d),s=Y(d),a&&a.l(d),d.forEach(h)},m(u,d){P(u,e,d);for(let _=0;_<o.length;_+=1)o[_].m(e,null);V(e,l),c&&c.m(e,null),V(e,s),a&&a.m(e,null),n=!0},p(u,d){if(d[0]&7725){r=u[3].mainCategories;let _;for(_=0;_<r.length;_+=1){const I=dt(u,r,_);o[_]?(o[_].p(I,d),M(o[_],1)):(o[_]=ht(I),o[_].c(),M(o[_],1),o[_].m(e,l))}for(fe(),_=r.length;_<o.length;_+=1)f(_);ce()}d[0]&40&&(t=u[32].paginate.filter(u[19]).length>0),t?c?(c.p(Ye(u),d),d[0]&40&&M(c,1)):(c=pt(Ye(u)),c.c(),M(c,1),c.m(e,s)):c&&(fe(),U(c,1,1,()=>{c=null}),ce()),u[32].paginate.length<u[32].new.length?a?a.p(u,d):(a=bt(u),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(u){if(!n){for(let d=0;d<r.length;d+=1)M(o[d]);M(c),n=!0}},o(u){o=o.filter(Boolean);for(let d=0;d<o.length;d+=1)U(o[d]);U(c),n=!1},d(u){u&&h(e),ze(o,u),c&&c.d(),a&&a.d()}}}function mt(i){let e,l;return e=new Gt({props:{site:i[3].publicSite,essaysItems:i[2],category:i[37].key,data:i[38],newData:i[32].new,dataLen:i[36],index:i[34],entities:i[9],updatePosition:i[0],batchSize:i[10],defaultNodes:[...i[11]],loadData:i[12]}}),{c(){he(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,s){ge(e,t,s),l=!0},p(t,s){const n={};s[0]&8&&(n.site=t[3].publicSite),s[0]&4&&(n.essaysItems=t[2]),s[0]&8&&(n.category=t[37].key),s[0]&40&&(n.data=t[38]),s[0]&32&&(n.newData=t[32].new),s[0]&40&&(n.dataLen=t[36]),s[0]&1&&(n.updatePosition=t[0]),e.$set(n)},i(t){l||(M(e.$$.fragment,t),l=!0)},o(t){U(e.$$.fragment,t),l=!1},d(t){be(e,t)}}}function ht(i){let e,l,t=i[38].length>0&&mt(i);return{c(){t&&t.c(),e=W()},l(s){t&&t.l(s),e=W()},m(s,n){t&&t.m(s,n),P(s,e,n),l=!0},p(s,n){s[38].length>0?t?(t.p(s,n),n[0]&40&&M(t,1)):(t=mt(s),t.c(),M(t,1),t.m(e.parentNode,e)):t&&(fe(),U(t,1,1,()=>{t=null}),ce())},i(s){l||(M(t),l=!0)},o(s){U(t),l=!1},d(s){t&&t.d(s),s&&h(e)}}}function pt(i){let e,l,t=i[35].length>0&&gt(i);return{c(){t&&t.c(),e=W()},l(s){t&&t.l(s),e=W()},m(s,n){t&&t.m(s,n),P(s,e,n),l=!0},p(s,n){s[35].length>0?t?(t.p(s,n),n[0]&40&&M(t,1)):(t=gt(s),t.c(),M(t,1),t.m(e.parentNode,e)):t&&(fe(),U(t,1,1,()=>{t=null}),ce())},i(s){l||(M(t),l=!0)},o(s){U(t),l=!1},d(s){t&&t.d(s),s&&h(e)}}}function gt(i){let e,l;return e=new Gt({props:{site:i[3].publicSite,essaysItems:i[2],category:"",data:i[35],newData:i[32].new,dataLen:i[36],index:i[34],entities:i[9],updatePosition:i[0],batchSize:i[10],defaultNodes:[...i[11]],loadData:i[12]}}),{c(){he(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,s){ge(e,t,s),l=!0},p(t,s){const n={};s[0]&8&&(n.site=t[3].publicSite),s[0]&4&&(n.essaysItems=t[2]),s[0]&40&&(n.data=t[35]),s[0]&32&&(n.newData=t[32].new),s[0]&40&&(n.dataLen=t[36]),s[0]&1&&(n.updatePosition=t[0]),e.$set(n)},i(t){l||(M(e.$$.fragment,t),l=!0)},o(t){U(e.$$.fragment,t),l=!1},d(t){be(e,t)}}}function bt(i){let e,l,t,s;return{c(){e=O("div"),l=x("Load more"),this.h()},l(n){e=z(n,"DIV",{class:!0});var r=q(e);l=ee(r,"Load more"),r.forEach(h),this.h()},h(){m(e,"class","more svelte-d0zru6")},m(n,r){P(n,e,r),V(e,l),t||(s=[K(e,"click",function(){Qe(i[13](i[34],i[7]))&&i[13](i[34],i[7]).apply(this,arguments)}),K(e,"keydown",function(){Qe(i[13](i[34],i[7]))&&i[13](i[34],i[7]).apply(this,arguments)})],t=!0)},p(n,r){i=n},d(n){n&&h(e),t=!1,Oe(s)}}}function vt(i){let e,l,t,s,n,r,o;const f=[Sl,Dl],c=[];function a(u,d){var _,I;return(_=u[32])!=null&&_.new&&((I=u[32])==null?void 0:I.new.length)>0?0:1}return l=a(i),t=c[l]=f[l](i),{c(){e=O("div"),t.c(),s=J(),this.h()},l(u){e=z(u,"DIV",{class:!0,id:!0});var d=q(e);t.l(d),s=Y(d),d.forEach(h),this.h()},h(){m(e,"class","links svelte-d0zru6"),m(e,"id","col_"+i[34])},m(u,d){P(u,e,d),c[l].m(e,null),V(e,s),i[22](e),n=!0,r||(o=[K(e,"scroll",i[23]),K(e,"click",i[24]),K(e,"keypress",i[25])],r=!0)},p(u,d){let _=l;l=a(u),l===_?c[l].p(u,d):(fe(),U(c[_],1,1,()=>{c[_]=null}),ce(),t=c[l],t?t.p(u,d):(t=c[l]=f[l](u),t.c()),M(t,1),t.m(e,s))},i(u){n||(M(t),n=!0)},o(u){U(t),n=!1},d(u){u&&h(e),c[l].d(),i[22](null),r=!1,Oe(o)}}}function kt(i){let e,l,t,s;return{c(){e=O("div"),l=x("✕"),this.h()},l(n){e=z(n,"DIV",{class:!0});var r=q(e);l=ee(r,"✕"),r.forEach(h),this.h()},h(){m(e,"class","close svelte-d0zru6")},m(n,r){P(n,e,r),V(e,l),t||(s=[K(e,"click",i[27]),K(e,"keypress",i[28])],t=!0)},p:j,d(n){n&&h(e),t=!1,Oe(s)}}}function Ll(i){let e,l,t,s,n,r;const o=[Tl,Pl],f=[];function c(u,d){return u[8].length==0?0:1}l=c(i),t=f[l]=o[l](i);let a=i[5].length>1&&kt(i);return{c(){e=O("div"),t.c(),s=J(),a&&a.c(),n=W(),this.h()},l(u){e=z(u,"DIV",{class:!0});var d=q(e);t.l(d),d.forEach(h),s=Y(u),a&&a.l(u),n=W(),this.h()},h(){m(e,"class","graph svelte-d0zru6")},m(u,d){P(u,e,d),f[l].m(e,null),i[26](e),P(u,s,d),a&&a.m(u,d),P(u,n,d),r=!0},p(u,d){let _=l;l=c(u),l===_?f[l].p(u,d):(fe(),U(f[_],1,1,()=>{f[_]=null}),ce(),t=f[l],t?t.p(u,d):(t=f[l]=o[l](u),t.c()),M(t,1),t.m(e,null)),u[5].length>1?a?a.p(u,d):(a=kt(u),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},i(u){r||(M(t),r=!0)},o(u){U(t),r=!1},d(u){u&&h(e),f[l].d(),i[26](null),u&&h(s),a&&a.d(u),u&&h(n)}}}function Al(i,e,l){const t=l-e;return(i-e)/t*100}function Nl(i,e,l){const t=l-e;return e+t*i/100}function Ol(i,e,l){let t,s,n,r;ie(i,Ne,k=>l(30,s=k)),ie(i,de,k=>l(5,n=k));let{updatePosition:o}=e,{handlePosition:f}=e,{data:c}=e,{visibleItemsID:a}=e,{essaysItems:u}=e,{config:d}=e,{items:_}=e,{screenSize:I}=e,D;const A=ke([]);ie(i,A,k=>l(8,r=k));let L=d.batch,C,p=c.nodes.filter(k=>a.includes(k.id));je(async()=>{b(c.nodes,L)}),Ot(()=>{C.lastElementChild&&I>600&&C.lastElementChild.scrollIntoView({behavior:"smooth",block:"end"}),f()});async function b(k,N){const H=k.map(Z=>{var oe,X;return(((oe=Z==null?void 0:Z.id)==null?void 0:oe.split("/"))||((X=Z==null?void 0:Z.target)==null?void 0:X.split("/"))).slice(-1)[0]}),ne=Math.ceil(H.length/N);for(let Z=0;Z<ne;Z++){const te=H.slice(Z*N,(Z+1)*N);let oe=`${d.api}/items?${te.map(re=>`id[]=${re}`).join("&")}`,X=await fetch(oe),ae=await X.json();A.update(re=>(re.includes(...ae)||re.push(...ae),re)),ae.length!=te.length&&(oe=`${d.api}/media?${te.map(re=>`id[]=${re}`).join("&")}`,X=await fetch(oe),ae=await X.json(),A.update(re=>(re.includes(...ae)||re.push(...ae),re)))}}let y;const E=(k,N)=>{var H,ne,Z,te,oe;if(N!=null){const X=((H=n[k])==null?void 0:H.page)+1||0;se(de,n[k]={...n[k],page:X,paginate:(ne=n[k])==null?void 0:ne.data.slice(0,X*L)},n),(Z=n[k])!=null&&Z.data&&((te=n[k])==null?void 0:te.paginate.length)!=((oe=n[k])==null?void 0:oe.data.length)&&b(n[k].paginate.slice(-L),L)}};let w=0;function S(k){var N,H,ne,Z,te,oe;if(s){const X=document.querySelectorAll(".links:first-of-type .node");let ae=(N=X==null?void 0:X[w])==null?void 0:N.offsetTop,re=(H=X==null?void 0:X[w])==null?void 0:H.getAttribute("data-id"),me=(ne=X==null?void 0:X[w+1])==null?void 0:ne.offsetTop,ye=(Z=X==null?void 0:X[w+1])==null?void 0:Z.getAttribute("data-id"),Ve=(te=document.querySelector(`.node-highlite[data-id="${re}"]`))==null?void 0:te.offsetTop,Me=(oe=document.querySelector(`.node-highlite[data-id="${ye}"]`))==null?void 0:oe.offsetTop,qe=Al(k,ae,me),Se=Nl(qe,Ve,Me);const Ce=document.querySelector(".markdown__container");k>me&&w++,k<ae&&w!=0&&w--,Ce&&Se&&ae!==me&&Se>0&&(Ce==null||Ce.scrollTo({top:Se}))}}const B=k=>!d.mainCategories.some(N=>N.props.includes(k.property)),F=(k,N)=>k.props.includes(N.property),T=(k,N)=>k.props.includes(N.property);function R(k){we[k?"unshift":"push"](()=>{y=k,l(7,y)})}const Q=()=>{let k=document.querySelector("#col_0");k.addEventListener("scroll",N=>{l(4,D=k==null?void 0:k.scrollTop)}),f()},le=()=>{f()},G=()=>{f()};function $(k){we[k?"unshift":"push"](()=>{C=k,l(6,C)})}const g=()=>{se(de,n=[],n),f()},v=()=>{se(de,n=[],n)};return i.$$set=k=>{"updatePosition"in k&&l(0,o=k.updatePosition),"handlePosition"in k&&l(1,f=k.handlePosition),"data"in k&&l(14,c=k.data),"visibleItemsID"in k&&l(15,a=k.visibleItemsID),"essaysItems"in k&&l(2,u=k.essaysItems),"config"in k&&l(3,d=k.config),"items"in k&&l(16,_=k.items),"screenSize"in k&&l(17,I=k.screenSize)},i.$$.update=()=>{var k;i.$$.dirty[0]&65544&&l(18,t=_.filter(N=>N==null?void 0:N.data).map(N=>{var H,ne;return{img:(H=N.data)==null?void 0:H.thumbnail_display_urls.large,source:`item_${N.id}`,target:`${d.api}/resources/${N.id}`,title:((ne=N.data)==null?void 0:ne["o:title"])||""}})),i.$$.dirty[0]&262176&&(n&&n.length==0||de&&((k=n==null?void 0:n[0])==null?void 0:k.data.length)==0)&&se(de,n[0]={data:t,new:t,page:0,paginate:t},n),i.$$.dirty[0]&16&&S(D)},[o,f,u,d,D,n,C,y,r,A,L,p,b,E,c,a,_,I,t,B,F,T,R,Q,le,G,$,g,v]}class zl extends Pe{constructor(e){super(),Te(this,e,Ol,Ll,De,{updatePosition:0,handlePosition:1,data:14,visibleItemsID:15,essaysItems:2,config:3,items:16,screenSize:17},null,[-1,-1])}}function yt(i,e,l){const t=i.slice();return t[2]=e[l][0],t[3]=e[l][1],t}function It(i,e,l){const t=i.slice();return t[6]=e[l],t}function Et(i){let e,l,t=Object.entries(i[0]),s=[];for(let n=0;n<t.length;n+=1)s[n]=At(yt(i,t,n));return{c(){e=Ie("svg"),l=Ie("g");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=Ee(n,"svg",{class:!0});var r=q(e);l=Ee(r,"g",{});var o=q(l);for(let f=0;f<s.length;f+=1)s[f].l(o);o.forEach(h),r.forEach(h),this.h()},h(){m(e,"class","svelte-1ddz0y9")},m(n,r){P(n,e,r),V(e,l);for(let o=0;o<s.length;o+=1)s[o].m(l,null)},p(n,r){if(r&3){t=Object.entries(n[0]);let o;for(o=0;o<t.length;o+=1){const f=yt(n,t,o);s[o]?s[o].p(f,r):(s[o]=At(f),s[o].c(),s[o].m(l,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){n&&h(e),ze(s,n)}}}function wt(i){let e,l,t=i[6].label+"",s,n,r,o,f,c,a,u,d=i[6].label+"",_,I,D,A,L,C,p=i[6].reverse&&i[6].label&&Pt(),b=!i[6].reverse&&i[6].label&&Tt(),y=i[6].reverse&&i[6].label&&Dt(),E=!i[6].reverse&&i[6].label&&St();return{c(){e=Ie("text"),l=Ie("textPath"),s=x(t),p&&p.c(),n=W(),b&&b.c(),a=Ie("text"),u=Ie("textPath"),_=x(d),y&&y.c(),I=W(),E&&E.c(),this.h()},l(w){e=Ee(w,"text",{class:!0,source:!0,target:!0});var S=q(e);l=Ee(S,"textPath",{"alignment-baseline":!0,href:!0,startOffset:!0,"text-anchor":!0});var B=q(l);s=ee(B,t),p&&p.l(B),n=W(),b&&b.l(B),B.forEach(h),S.forEach(h),a=Ee(w,"text",{class:!0,source:!0,target:!0});var F=q(a);u=Ee(F,"textPath",{"alignment-baseline":!0,href:!0,startOffset:!0,"text-anchor":!0});var T=q(u);_=ee(T,d),y&&y.l(T),I=W(),E&&E.l(T),T.forEach(h),F.forEach(h),this.h()},h(){m(l,"alignment-baseline","middle"),m(l,"href",r="#path_"+i[2]),m(l,"startOffset","99%"),m(l,"text-anchor","end"),m(e,"class",o="background "+i[6].class+" svelte-1ddz0y9"),m(e,"source",f=i[6].datum.source),m(e,"target",c=i[6].datum.target),m(u,"alignment-baseline","middle"),m(u,"href",D="#path_"+i[2]),m(u,"startOffset","99%"),m(u,"text-anchor","end"),m(a,"class",A=He(i[6].class)+" svelte-1ddz0y9"),m(a,"source",L=i[6].datum.source),m(a,"target",C=i[6].datum.target)},m(w,S){P(w,e,S),V(e,l),V(l,s),p&&p.m(l,null),V(l,n),b&&b.m(l,null),P(w,a,S),V(a,u),V(u,_),y&&y.m(u,null),V(u,I),E&&E.m(u,null)},p(w,S){S&1&&t!==(t=w[6].label+"")&&ve(s,t),w[6].reverse&&w[6].label?p||(p=Pt(),p.c(),p.m(l,n)):p&&(p.d(1),p=null),!w[6].reverse&&w[6].label?b||(b=Tt(),b.c(),b.m(l,null)):b&&(b.d(1),b=null),S&1&&r!==(r="#path_"+w[2])&&m(l,"href",r),S&1&&o!==(o="background "+w[6].class+" svelte-1ddz0y9")&&m(e,"class",o),S&1&&f!==(f=w[6].datum.source)&&m(e,"source",f),S&1&&c!==(c=w[6].datum.target)&&m(e,"target",c),S&1&&d!==(d=w[6].label+"")&&ve(_,d),w[6].reverse&&w[6].label?y||(y=Dt(),y.c(),y.m(u,I)):y&&(y.d(1),y=null),!w[6].reverse&&w[6].label?E||(E=St(),E.c(),E.m(u,null)):E&&(E.d(1),E=null),S&1&&D!==(D="#path_"+w[2])&&m(u,"href",D),S&1&&A!==(A=He(w[6].class)+" svelte-1ddz0y9")&&m(a,"class",A),S&1&&L!==(L=w[6].datum.source)&&m(a,"source",L),S&1&&C!==(C=w[6].datum.target)&&m(a,"target",C)},d(w){w&&h(e),p&&p.d(),b&&b.d(),w&&h(a),y&&y.d(),E&&E.d()}}}function Pt(i){let e;return{c(){e=x(" -")},l(l){e=ee(l," -")},m(l,t){P(l,e,t)},d(l){l&&h(e)}}}function Tt(i){let e;return{c(){e=x("→")},l(l){e=ee(l,"→")},m(l,t){P(l,e,t)},d(l){l&&h(e)}}}function Dt(i){let e;return{c(){e=x("←")},l(l){e=ee(l,"←")},m(l,t){P(l,e,t)},d(l){l&&h(e)}}}function St(i){let e;return{c(){e=x("→")},l(l){e=ee(l,"→")},m(l,t){P(l,e,t)},d(l){l&&h(e)}}}function Lt(i){let e,l,t,s,n,r,o=(i[1]==i[6].datum.source&&i[6].selected!="not-selected"||i[1]==i[6].datum.target)&&wt(i);return{c(){e=Ie("path"),o&&o.c(),r=W(),this.h()},l(f){e=Ee(f,"path",{id:!0,class:!0,"data-attr":!0,d:!0}),q(e).forEach(h),o&&o.l(f),r=W(),this.h()},h(){m(e,"id",l="path_"+i[2]),m(e,"class",t=He(i[6].class)+" svelte-1ddz0y9"),m(e,"data-attr",s=i[6].selected),m(e,"d",n=i[6].d)},m(f,c){P(f,e,c),o&&o.m(f,c),P(f,r,c)},p(f,c){c&1&&l!==(l="path_"+f[2])&&m(e,"id",l),c&1&&t!==(t=He(f[6].class)+" svelte-1ddz0y9")&&m(e,"class",t),c&1&&s!==(s=f[6].selected)&&m(e,"data-attr",s),c&1&&n!==(n=f[6].d)&&m(e,"d",n),f[1]==f[6].datum.source&&f[6].selected!="not-selected"||f[1]==f[6].datum.target?o?o.p(f,c):(o=wt(f),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},d(f){f&&h(e),o&&o.d(f),f&&h(r)}}}function At(i){let e,l=i[3],t=[];for(let s=0;s<l.length;s+=1)t[s]=Lt(It(i,l,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=W()},l(s){for(let n=0;n<t.length;n+=1)t[n].l(s);e=W()},m(s,n){for(let r=0;r<t.length;r+=1)t[r].m(s,n);P(s,e,n)},p(s,n){if(n&3){l=s[3];let r;for(r=0;r<l.length;r+=1){const o=It(s,l,r);t[r]?t[r].p(o,n):(t[r]=Lt(o),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(s){ze(t,s),s&&h(e)}}}function Vl(i){let e=Object.keys(i[0]).length>0,l,t=e&&Et(i);return{c(){t&&t.c(),l=W()},l(s){t&&t.l(s),l=W()},m(s,n){t&&t.m(s,n),P(s,l,n)},p(s,[n]){n&1&&(e=Object.keys(s[0]).length>0),e?t?t.p(s,n):(t=Et(s),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},i:j,o:j,d(s){t&&t.d(s),s&&h(l)}}}function Ml(i,e,l){let t,s;return ie(i,Ue,n=>l(0,t=n)),ie(i,Je,n=>l(1,s=n)),[t,s]}class ql extends Pe{constructor(e){super(),Te(this,e,Ml,Vl,De,{})}}function Cl(i){let e,l,t,s,n,r,o,f,c,a,u;return t=new sl({props:{data:i[2],items:i[4],scrollTopVal:i[8]}}),r=new zl({props:{items:i[4],data:i[10],screenSize:i[0],essaysItems:i[6],visibleItemsID:i[5],handlePosition:i[14],updatePosition:i[13],config:Rt}}),f=new ql({}),{c(){e=O("article"),l=O("section"),he(t.$$.fragment),s=J(),n=O("section"),he(r.$$.fragment),o=J(),he(f.$$.fragment),this.h()},l(d){e=z(d,"ARTICLE",{style:!0,class:!0});var _=q(e);l=z(_,"SECTION",{class:!0});var I=q(l);pe(t.$$.fragment,I),I.forEach(h),s=Y(_),n=z(_,"SECTION",{class:!0});var D=q(n);pe(r.$$.fragment,D),D.forEach(h),o=Y(_),pe(f.$$.fragment,_),_.forEach(h),this.h()},h(){var d;m(l,"class","markdown__container svelte-15zdm0q"),m(n,"class","graph__container svelte-15zdm0q"),$e(e,"--theme-color",((d=i[2].meta)==null?void 0:d.color)||"blue"),m(e,"class","svelte-15zdm0q")},m(d,_){P(d,e,_),V(e,l),ge(t,l,null),i[19](l),V(e,s),V(e,n),ge(r,n,null),V(e,o),ge(f,e,null),i[26](e),c=!0,a||(u=[K(l,"wheel",i[20],{passive:!0}),K(l,"scroll",i[21]),K(n,"wheel",i[22],{passive:!0}),K(e,"resize",i[14]),K(e,"scroll",i[23]),K(e,"touchmove",i[24],{passive:!0}),K(e,"click",i[25]),K(e,"keypress",i[17])],a=!0)},p(d,_){var A;const I={};_&4&&(I.data=d[2]),_&16&&(I.items=d[4]),_&256&&(I.scrollTopVal=d[8]),t.$set(I);const D={};_&16&&(D.items=d[4]),_&1024&&(D.data=d[10]),_&1&&(D.screenSize=d[0]),_&64&&(D.essaysItems=d[6]),_&32&&(D.visibleItemsID=d[5]),r.$set(D),(!c||_&4)&&$e(e,"--theme-color",((A=d[2].meta)==null?void 0:A.color)||"blue")},i(d){c||(M(t.$$.fragment,d),M(r.$$.fragment,d),M(f.$$.fragment,d),c=!0)},o(d){U(t.$$.fragment,d),U(r.$$.fragment,d),U(f.$$.fragment,d),c=!1},d(d){d&&h(e),be(t),i[19](null),be(r),be(f),i[26](null),a=!1,Oe(u)}}}function Gl(i){let e,l,t,s;return{c(){e=O("article"),l=O("section"),t=O("h4"),s=x("Loading..."),this.h()},l(n){e=z(n,"ARTICLE",{class:!0});var r=q(e);l=z(r,"SECTION",{class:!0});var o=q(l);t=z(o,"H4",{});var f=q(t);s=ee(f,"Loading..."),f.forEach(h),o.forEach(h),r.forEach(h),this.h()},h(){m(l,"class","short_text svelte-15zdm0q"),m(e,"class","svelte-15zdm0q")},m(n,r){P(n,e,r),V(e,l),V(l,t),V(t,s)},p:j,i:j,o:j,d(n){n&&h(e)}}}function Fl(i){let e,l,t,s;return{c(){e=O("article"),l=O("section"),t=O("h4"),s=x("404 Page not found"),this.h()},l(n){e=z(n,"ARTICLE",{class:!0});var r=q(e);l=z(r,"SECTION",{class:!0});var o=q(l);t=z(o,"H4",{});var f=q(t);s=ee(f,"404 Page not found"),f.forEach(h),o.forEach(h),r.forEach(h),this.h()},h(){m(l,"class","short_text svelte-15zdm0q"),m(e,"class","svelte-15zdm0q")},m(n,r){P(n,e,r),V(e,l),V(l,t),V(t,s)},p:j,i:j,o:j,d(n){n&&h(e)}}}function Nt(i){var G,$;let e,l,t,s,n,r,o,f,c,a,u,d,_,I,D,A,L,C,p,b,y,E,w,S,B,F,T,R,Q,le;return document.title=e=(($=(G=i[2])==null?void 0:G.meta)==null?void 0:$.title)||Le,{c(){l=J(),t=O("meta"),n=J(),r=O("meta"),f=J(),c=O("meta"),u=J(),d=O("meta"),I=J(),D=O("meta"),L=J(),C=O("meta"),p=J(),b=O("meta"),E=J(),w=O("meta"),B=J(),F=O("meta"),R=J(),Q=O("meta"),this.h()},l(g){l=Y(g),t=z(g,"META",{name:!0,content:!0}),n=Y(g),r=z(g,"META",{property:!0,content:!0}),f=Y(g),c=z(g,"META",{property:!0,content:!0}),u=Y(g),d=z(g,"META",{property:!0,content:!0}),I=Y(g),D=z(g,"META",{property:!0,content:!0}),L=Y(g),C=z(g,"META",{name:!0,content:!0}),p=Y(g),b=z(g,"META",{property:!0,content:!0}),E=Y(g),w=z(g,"META",{name:!0,content:!0}),B=Y(g),F=z(g,"META",{name:!0,content:!0}),R=Y(g),Q=z(g,"META",{name:!0,content:!0}),this.h()},h(){var g,v,k,N,H,ne,Z,te,oe,X,ae,re,me,ye;m(t,"name","description"),m(t,"content",s=((v=(g=i[2])==null?void 0:g.meta)==null?void 0:v.description)||Ae),m(r,"property","og:url"),m(r,"content",o=i[9].url.origin),m(c,"property","og:title"),m(c,"content",a=((N=(k=i[2])==null?void 0:k.meta)==null?void 0:N.title)||Le),m(d,"property","og:description"),m(d,"content",_=((ne=(H=i[2])==null?void 0:H.meta)==null?void 0:ne.description)||Ae),m(D,"property","og:image"),m(D,"content",A=((te=(Z=i[2])==null?void 0:Z.meta)==null?void 0:te.cover)||Fe),m(C,"name","twitter:card"),m(C,"content","summary_large_image"),m(b,"property","twitter:url"),m(b,"content",y=i[9].url.origin),m(w,"name","twitter:title"),m(w,"content",S=((X=(oe=i[2])==null?void 0:oe.meta)==null?void 0:X.title)||Le),m(F,"name","twitter:description"),m(F,"content",T=((re=(ae=i[2])==null?void 0:ae.meta)==null?void 0:re.description)||Ae),m(Q,"name","twitter:image"),m(Q,"content",le=((ye=(me=i[2])==null?void 0:me.meta)==null?void 0:ye.cover)||Fe)},m(g,v){P(g,l,v),P(g,t,v),P(g,n,v),P(g,r,v),P(g,f,v),P(g,c,v),P(g,u,v),P(g,d,v),P(g,I,v),P(g,D,v),P(g,L,v),P(g,C,v),P(g,p,v),P(g,b,v),P(g,E,v),P(g,w,v),P(g,B,v),P(g,F,v),P(g,R,v),P(g,Q,v)},p(g,v){var k,N,H,ne,Z,te,oe,X,ae,re,me,ye,Ve,Me,qe,Se;v&4&&e!==(e=((N=(k=g[2])==null?void 0:k.meta)==null?void 0:N.title)||Le)&&(document.title=e),v&4&&s!==(s=((ne=(H=g[2])==null?void 0:H.meta)==null?void 0:ne.description)||Ae)&&m(t,"content",s),v&512&&o!==(o=g[9].url.origin)&&m(r,"content",o),v&4&&a!==(a=((te=(Z=g[2])==null?void 0:Z.meta)==null?void 0:te.title)||Le)&&m(c,"content",a),v&4&&_!==(_=((X=(oe=g[2])==null?void 0:oe.meta)==null?void 0:X.description)||Ae)&&m(d,"content",_),v&4&&A!==(A=((re=(ae=g[2])==null?void 0:ae.meta)==null?void 0:re.cover)||Fe)&&m(D,"content",A),v&512&&y!==(y=g[9].url.origin)&&m(b,"content",y),v&4&&S!==(S=((ye=(me=g[2])==null?void 0:me.meta)==null?void 0:ye.title)||Le)&&m(w,"content",S),v&4&&T!==(T=((Me=(Ve=g[2])==null?void 0:Ve.meta)==null?void 0:Me.description)||Ae)&&m(F,"content",T),v&4&&le!==(le=((Se=(qe=g[2])==null?void 0:qe.meta)==null?void 0:Se.cover)||Fe)&&m(Q,"content",le)},d(g){g&&h(l),g&&h(t),g&&h(n),g&&h(r),g&&h(f),g&&h(c),g&&h(u),g&&h(d),g&&h(I),g&&h(D),g&&h(L),g&&h(C),g&&h(p),g&&h(b),g&&h(E),g&&h(w),g&&h(B),g&&h(F),g&&h(R),g&&h(Q)}}}function Bl(i){let e,l,t,s,n,r,o,f;Ft(i[18]);const c=[Fl,Gl,Cl],a=[];function u(_,I){return _[2]==null&&_[3]==null?0:_[3]==null?1:2}l=u(i),t=a[l]=c[l](i);let d=i[2]!=null&&Nt(i);return{c(){e=O("div"),t.c(),s=J(),d&&d.c(),n=W()},l(_){e=z(_,"DIV",{});var I=q(e);t.l(I),I.forEach(h),s=Y(_);const D=Bt("svelte-hn2qma",document.head);d&&d.l(D),n=W(),D.forEach(h)},m(_,I){P(_,e,I),a[l].m(e,null),P(_,s,I),d&&d.m(document.head,null),V(document.head,n),r=!0,o||(f=[K(window,"resize",i[14]),K(window,"click",i[14]),K(window,"resize",i[18])],o=!0)},p(_,[I]){let D=l;l=u(_),l===D?a[l].p(_,I):(fe(),U(a[D],1,1,()=>{a[D]=null}),ce(),t=a[l],t?t.p(_,I):(t=a[l]=c[l](_),t.c()),M(t,1),t.m(e,null)),_[2]!=null?d?d.p(_,I):(d=Nt(_),d.c(),d.m(n.parentNode,n)):d&&(d.d(1),d=null)},i(_){r||(M(t),r=!0)},o(_){U(t),r=!1},d(_){_&&h(e),a[l].d(),_&&h(s),d&&d.d(_),h(n),o=!1,Oe(f)}}}function Ul(i,e,l){let t,s,n,r,o,f;ie(i,Xt,G=>l(9,t=G)),ie(i,xe,G=>l(10,s=G)),ie(i,Je,G=>l(16,n=G)),ie(i,We,G=>l(11,o=G)),ie(i,Ne,G=>l(12,f=G));let{data:c}=e,a,u,d=[],_,I,D=[],A=[],L,C;const p=ke(!1);ie(i,p,G=>l(27,r=G));const b=()=>{se(p,r=!0,r)};je(async()=>{l(2,d=[...c.posts].find($=>$.path.includes(t.params.slug))),l(4,I=await hl(d.text)),l(5,D=I.filter($=>!$.set).map($=>{var g;return`${_e}/resources/${(g=$.data)==null?void 0:g["o:id"]}`})),l(3,_=await Ct(I)),se(xe,s=_,s);const G=localStorage.getItem("selectedLanguage");l(6,A=c.posts.reduce(($,g)=>(!g.path.includes(t.params.slug)&&g.meta.lang==G&&g.links.map(v=>{const k=$.find(H=>H.id===v),N={title:g.meta.title,url:g.path};k?k.essays.some(H=>H.title===N.title&&H.url===N.url)||k.essays.push(N):$.push({id:v,essays:[N]})}),$),[]))});function y(G){Be.call(this,i,G)}function E(){l(0,a=window.innerWidth)}function w(G){we[G?"unshift":"push"](()=>{u=G,l(1,u)})}const S=()=>{b(),se(Ne,f=!1,f),l(8,C=u==null?void 0:u.scrollTop)},B=()=>{a<1e3&&(b(),l(8,C=u==null?void 0:u.scrollTop),se(Ne,f=!1,f))},F=()=>{a>1e3&&se(Ne,f=!0,f)},T=()=>{se(We,o=L==null?void 0:L.scrollLeft,o)},R=()=>{se(We,o=L==null?void 0:L.scrollLeft,o),b()},Q=()=>{b()};function le(G){we[G?"unshift":"push"](()=>{L=G,l(7,L)})}return i.$$set=G=>{"data"in G&&l(15,c=G.data)},i.$$.update=()=>{i.$$.dirty&65536&&b()},[a,u,d,_,I,D,A,L,C,t,s,o,f,p,b,c,n,y,E,w,S,B,F,T,R,Q,le]}class Ql extends Pe{constructor(e){super(),Te(this,e,Ul,Bl,De,{data:15})}}export{Ql as component,Yl as universal};
